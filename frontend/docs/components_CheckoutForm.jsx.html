<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>components/CheckoutForm.jsx - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-App.html">App</a><ul class='methods'><li data-type='method'><a href="module-App.html#~App">App</a></li></ul></li><li><a href="module-AppRoutes.html">AppRoutes</a><ul class='methods'><li data-type='method'><a href="module-AppRoutes.html#~AppRoutes">AppRoutes</a></li></ul></li><li><a href="module-CheckoutForm.html">CheckoutForm</a><ul class='methods'><li data-type='method'><a href="module-CheckoutForm.html#~CheckoutForm">CheckoutForm</a></li><li data-type='method'><a href="module-CheckoutForm.html#~handlePayPal">handlePayPal</a></li><li data-type='method'><a href="module-CheckoutForm.html#~handleSubmit">handleSubmit</a></li></ul></li><li><a href="module-Cookies.html">Cookies</a><ul class='methods'><li data-type='method'><a href="module-Cookies.html#~Cookies">Cookies</a></li></ul></li><li><a href="module-FaqPage.html">FaqPage</a><ul class='methods'><li data-type='method'><a href="module-FaqPage.html#~FaqPage">FaqPage</a></li></ul></li><li><a href="module-Features.html">Features</a><ul class='methods'><li data-type='method'><a href="module-Features.html#~Features">Features</a></li></ul></li><li><a href="module-Footer.html">Footer</a><ul class='methods'><li data-type='method'><a href="module-Footer.html#~Footer">Footer</a></li></ul></li><li><a href="module-Home.html">Home</a><ul class='methods'><li data-type='method'><a href="module-Home.html#~ChatAssistant">ChatAssistant</a></li><li data-type='method'><a href="module-Home.html#~Home">Home</a></li><li data-type='method'><a href="module-Home.html#~HomeContent">HomeContent</a></li><li data-type='method'><a href="module-Home.html#~ImageLoader">ImageLoader</a></li></ul></li><li><a href="module-LegalNotice.html">LegalNotice</a><ul class='methods'><li data-type='method'><a href="module-LegalNotice.html#~LegalNotice">LegalNotice</a></li></ul></li><li><a href="module-Navbar.html">Navbar</a><ul class='methods'><li data-type='method'><a href="module-Navbar.html#~Navbar">Navbar</a></li><li data-type='method'><a href="module-Navbar.html#~handleLogout">handleLogout</a></li><li data-type='method'><a href="module-Navbar.html#~toggleMenu">toggleMenu</a></li></ul></li><li><a href="module-Payment.html">Payment</a><ul class='methods'><li data-type='method'><a href="module-Payment.html#~Payment">Payment</a></li></ul></li><li><a href="module-PaymentSuccess.html">PaymentSuccess</a><ul class='methods'><li data-type='method'><a href="module-PaymentSuccess.html#~PaymentSuccess">PaymentSuccess</a></li><li data-type='method'><a href="module-PaymentSuccess.html#~useEffect">useEffect</a></li></ul></li><li><a href="module-Pricing.html">Pricing</a><ul class='methods'><li data-type='method'><a href="module-Pricing.html#~Features">Features</a></li><li data-type='method'><a href="module-Pricing.html#~Pricing">Pricing</a></li><li data-type='method'><a href="module-Pricing.html#~PricingCard">PricingCard</a></li><li data-type='method'><a href="module-Pricing.html#~Testimonials">Testimonials</a></li><li data-type='method'><a href="module-Pricing.html#~handleSelectPlan">handleSelectPlan</a></li></ul></li><li><a href="module-Profile.html">Profile</a><ul class='methods'><li data-type='method'><a href="module-Profile.html#~Profile">Profile</a></li><li data-type='method'><a href="module-Profile.html#~handleLogout">handleLogout</a></li><li data-type='method'><a href="module-Profile.html#~useEffect">useEffect</a></li></ul></li><li><a href="module-Room.html">Room</a><ul class='methods'><li data-type='method'><a href="module-Room.html#~ErrorMessage">ErrorMessage</a></li><li data-type='method'><a href="module-Room.html#~LoadingSpinner">LoadingSpinner</a></li><li data-type='method'><a href="module-Room.html#~UploadSection">UploadSection</a></li><li data-type='method'><a href="module-Room.html#~isJsonResponse">isJsonResponse</a></li><li data-type='method'><a href="module-Room.html#~parseResponse">parseResponse</a></li></ul></li><li><a href="module-SignIn.html">SignIn</a><ul class='methods'><li data-type='method'><a href="module-SignIn.html#~GoogleSignInButton">GoogleSignInButton</a></li><li data-type='method'><a href="module-SignIn.html#~SignIn">SignIn</a></li><li data-type='method'><a href="module-SignIn.html#~SignInFooterLinks">SignInFooterLinks</a></li><li data-type='method'><a href="module-SignIn.html#~SignInForm">SignInForm</a></li><li data-type='method'><a href="module-SignIn.html#~SignInHeader">SignInHeader</a></li><li data-type='method'><a href="module-SignIn.html#~handleSubmit">handleSubmit</a></li></ul></li><li><a href="module-SignUp.html">SignUp</a><ul class='methods'><li data-type='method'><a href="module-SignUp.html#~GoogleSignUpButton">GoogleSignUpButton</a></li><li data-type='method'><a href="module-SignUp.html#~SignUp">SignUp</a></li><li data-type='method'><a href="module-SignUp.html#~SignUpForm">SignUpForm</a></li><li data-type='method'><a href="module-SignUp.html#~SignUpHeader">SignUpHeader</a></li><li data-type='method'><a href="module-SignUp.html#~handleInputChange">handleInputChange</a></li><li data-type='method'><a href="module-SignUp.html#~handleSubmit">handleSubmit</a></li></ul></li><li><a href="module-SupportPage.html">SupportPage</a><ul class='methods'><li data-type='method'><a href="module-SupportPage.html#~SupportPage">SupportPage</a></li></ul></li><li><a href="module-UploadZone.html">UploadZone</a><ul class='methods'><li data-type='method'><a href="module-UploadZone.html#~ImagePreview">ImagePreview</a></li><li data-type='method'><a href="module-UploadZone.html#~UploadPrompt">UploadPrompt</a></li><li data-type='method'><a href="module-UploadZone.html#~UploadZone">UploadZone</a></li><li data-type='method'><a href="module-UploadZone.html#~handleClick">handleClick</a></li><li data-type='method'><a href="module-UploadZone.html#~handleDragLeave">handleDragLeave</a></li><li data-type='method'><a href="module-UploadZone.html#~handleDragOver">handleDragOver</a></li><li data-type='method'><a href="module-UploadZone.html#~handleDrop">handleDrop</a></li><li data-type='method'><a href="module-UploadZone.html#~handleFileInput">handleFileInput</a></li><li data-type='method'><a href="module-UploadZone.html#~handleFiles">handleFiles</a></li></ul></li><li><a href="module-main.html">main</a></li><li><a href="module-routes.html">routes</a></li><li><a href="module-stripePromise.html">stripePromise</a><ul class='methods'><li data-type='method'><a href="module-stripePromise.html#~CheckoutForm">CheckoutForm</a></li><li data-type='method'><a href="module-stripePromise.html#~handlePayPal">handlePayPal</a></li><li data-type='method'><a href="module-stripePromise.html#~handleSubmit">handleSubmit</a></li></ul></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">components/CheckoutForm.jsx</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @fileoverview Formulaire de paiement sécurisé avec Stripe et PayPal
 * @module CheckoutForm
 */

import React, { useState } from 'react';
import { useLocation, useNavigate } from 'react-router-dom';
import { loadStripe } from '@stripe/stripe-js';
import { Elements, CardElement, useStripe, useElements } from '@stripe/react-stripe-js';

// Initialisez Stripe avec votre clé publique test


/**
 * Composant de formulaire de paiement
 * @function CheckoutForm
 * @param {Object} props - Les propriétés du composant
 * @param {number} props.price - Le prix à payer
 * @param {number} props.credits - Le nombre de crédits achetés
 * @description Gère le processus de paiement avec Stripe et PayPal
 * @returns {JSX.Element} Formulaire de paiement avec options de carte bancaire et PayPal
 */
const CheckoutForm = ({ price, credits }) => {
  const stripe = useStripe();
  const elements = useElements();
  const [error, setError] = useState(null);
  const [loading, setLoading] = useState(false);
  const navigate = useNavigate();

  /**
   * Redirige vers PayPal pour le paiement
   * @function handlePayPal
   */
  const handlePayPal = () => {
    window.location.href = `https://paypal.me/dreamhabitat/${price}EUR`;
  };

  /**
   * Gère la soumission du formulaire de paiement par carte
   * @function handleSubmit
   * @param {Event} e - L'événement de soumission du formulaire
   * @async
   */
  const handleSubmit = async (e) => {
    e.preventDefault();
    setLoading(true);

    if (!stripe || !elements) {
      return;
    }

    try {
      const { error, paymentMethod } = await stripe.createPaymentMethod({
        type: 'card',
        card: elements.getElement(CardElement),
      });

      if (error) {
        setError(error.message);
        return;
      }

      console.log('Payment Method:', paymentMethod);
      alert('Paiement simulé réussi!');
      navigate('/success', { 
        state: { 
          paymentMethod: paymentMethod ,
          credits: credits 
        }
      });
    } catch (err) {
      setError('Une erreur est survenue lors du paiement');
    } finally {
      setLoading(false);
    }
  };

  return (
    &lt;div className="space-y-6">
      &lt;div className="bg-white p-6 rounded-xl shadow-md">
        &lt;div className="mb-6">
          &lt;h3 className="text-lg font-semibold mb-4">Détails de la commande&lt;/h3>
          &lt;div className="flex justify-between text-gray-600">
            &lt;span>{credits} crédits&lt;/span>
            &lt;span>{price}€&lt;/span>
          &lt;/div>
        &lt;/div>

        &lt;form onSubmit={handleSubmit}>
          &lt;div className="mb-6">
            &lt;label className="block text-sm font-medium text-gray-700 mb-2">
              Carte bancaire
            &lt;/label>
            &lt;div className="border rounded-lg p-4">
              &lt;CardElement
                options={{
                  style: {
                    base: {
                      fontSize: '16px',
                      color: '#424770',
                      '::placeholder': {
                        color: '#aab7c4',
                      },
                    },
                    invalid: {
                      color: '#9e2146',
                    },
                  },
                }}
              />
            &lt;/div>
          &lt;/div>

          {error &amp;&amp; (
            &lt;div className="text-red-500 text-sm mb-4">
              {error}
            &lt;/div>
          )}

          &lt;button
            type="submit"
            disabled={!stripe || loading}
            className="w-full bg-gradient-to-r from-blue-500 to-purple-500 text-white py-3 px-4 rounded-lg font-medium transition-all hover:from-blue-600 hover:to-purple-600 disabled:opacity-50"
          >
            {loading ? 'Traitement...' : `Payer ${price}€`}
          &lt;/button>
        &lt;/form>

        &lt;div className="mt-4">
          &lt;button
            onClick={handlePayPal}
            className="w-full bg-[#0070BA] text-white py-3 px-4 rounded-lg font-medium hover:bg-[#003087] transition-colors"
          >
            Payer avec PayPal
          &lt;/button>
        &lt;/div>
      &lt;/div>

      &lt;div className="text-center text-sm text-gray-500">
        &lt;p>Paiement sécurisé&lt;/p>
      &lt;/div>
    &lt;/div>
  );
};

export default CheckoutForm;</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.4</a> on Fri May 02 2025 09:31:16 GMT+0200 (heure d’été d’Europe centrale) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
